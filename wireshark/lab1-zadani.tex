\section*{Cíle cvičení}
\begin{itemize}
	\item Seznámení se se základní prací v~OS Linux.
	\item Seznámení se se základními nástroji pro zjišťování konfigurace zařízení.
	\item Analýza síťového provozu pomocí Wireshark.
\end{itemize}

\section*{Pokyny}
\begin{itemize}
\item Do zadání nepište, slouží pro další skupiny. K zápisu používejte pouze záznamový arch, který vám zůstane.
\item Pro práci v laboratoři budeme používat OS Linux, při bootu volba F3.
\item Uživatelé a hesla pro přihlášení: \texttt{user - user4lab}, \texttt{root - root4lab}.
\end{itemize}

\section{Zadání}
Přihlaste se jako uživatel \texttt{user}. Veškeré potřebné příkazy následně spouštějte jako \texttt{root}.

\subsection{Zjišťování konfigurace}
V případě, že se v OS Linux úplně neorientujete, přečtěte si sekci 1.1 Základní orientace v Linuxu. V~této části se budeme zabývat převážně zjišťováním síťové konfigurace systému. Veškeré potřebné informace, které budete potřebovat ke splnění této části cvičení, naleznete v~sekci 1.2 Síťová konfigurace. V~případě, že si nejste jistí některým příkazem, neváhejte nahlédnout do manuálové stránky.

\begin{enumerate}
\item Vypište konfiguraci vašeho stroje (IP adresu, masku, síť, broadcastovou adresu).
\item Zobrazte si záznamy v~routovací a ARP tabulce. Zapište pravidlo týkající se defaultní cesty. Následně k~IP ve vypsaném záznamu přiřaďte MAC adresu. Jaký je rozdíl mezi defaultní cestou a defaultní bránou?
\item Otestujte konektivitu k~default gateway a následně konektivitu do internetu.
\item Vypište implicitní servery DNS a soubor, ve kterém jste tuto informaci nalezli.
\item Upravte patřičný soubor tak, aby po spuštění příkazu \texttt{ping google}, byl ping proveden vůči IP adrese 8.8.8.8. Zapište jak a který soubor jste upravili.
\item Vypište aktivní TCP spojení, vyberte jeden záznam, zapište si ho a popište význam jednotlivých položek. Pokud se žádné TCP spojení nezobrazuje, nějaké vygenerujte, například pomocí webového prohlížeče.
\item Zobrazte systémové události.
\item Zobrazte pouze události týkající se NetworkManager.
\item Pokuste se spustit Wireshark jako \texttt{sudo}. Následně nalezněte v~logu zprávu, která byla zaznamenána v~případě neúspěšného přihlášení.
\end{enumerate}

\subsection{Wireshark}
V~této části cvičení se budeme zabývat analýzou a zachytáváním provozu v~programu Wireshark. Spuštění Wireshark provedete příkazem \texttt{wireshark} pod uživatelem \texttt{root}. Veškeré potřebné informace, které budete potřebovat k~této části cvičení, naleznete v~sekci 2 Analýza Wireshark.

\begin{enumerate}
\item Pomocí programu Wireshark začněte zachytávat pouze HTTP komunikaci. Jakmile začnete zachytávat, spusťte si prohlížeč a načtěte stránku \texttt{http://www.fit.vutbr.cz}. Zachycený provoz uložte do svého domovského adresáře. (přípona \texttt{.pcap})
\item Zahajte znovu zachytávání komunikace, nyní bez použití filtru pro HTTP. V příkazové řádce odstraňte ARP záznamy (příkaz \texttt{arp ...} nebo \texttt{ip neightbour ...}). Ve wiresharku zobrazte veškerou komunikaci, následně vyfiltrujte pouze ARP a ICMP pakety. Vygenerujte ICMP komunikaci. Analyzujte obsah ARP paketů, zapište obsah sender, target MAC a IP adresy pro dvojici ARP request a response. Zapište, co jste zadali do filtru.
\item Ve Wireshark si otevřete soubor s~příponou \texttt{.pcap} z~adresáře \texttt{/root/isa1}. Zobrazte si graf síťových toků (flow graph) pouze pro SIP. Zapište datum a čas, kdy byl vyslán první SIP paket.
\item Zachyťte pouze HTTP a DNS provoz. Ve webovém prohlížeči zkuste otevřít několik stránek na různých URL adresách. Analyzujte obsah a posloupnost DNS paketů a následných HTTP paketů. Zkuste opakovaně načítat stejnou stránku. Proč v~některých případech není zachycena DNS komunikace?
\item Zachyťte HTTP komunikaci (nešifrovanou), zobrazte si TCP stream této komunikace. Zaznamenejte URL, které jste použili pro vygenerování HTTP provozu, a co Vám TCP stream zobrazil.
\end{enumerate}

\subsection{Ukončení práce v~laboratoři}
Jakmile máte veškerou práci hotovou, spusťte jako \texttt{root} skript s~názvem \texttt{clean}, který se nachází v~adresáři \texttt{/root/isa1}.
